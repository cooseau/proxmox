# 
# provides VLANs of vmbr0 as drop downs
# backup interfaces before edit
# cp /etc/network/interfaces /etc/network/interfaces.backup
# nano /etc/network/interfaces
# systemctl restart networking
#
# network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you're doing.
#
# If you want to manage parts of the network configuration manually,
# please utilize the 'source' or 'source-directory' directives to do
# so.
# PVE will preserve these directives, but will NOT read its network
# configuration from sourced files, so do not attempt to move any of
# the PVE managed interfaces into external files!
#
# default auto lo
auto lo
iface lo inet loopback
#
# physical nics
iface enp3s0 inet manual

iface enp4s0 inet manual

iface enp10s0 inet manual

iface enp11s0 inet manual

iface enp12s0 inet manual

iface eno1 inet manual
#
# VLAN-aware bridge interface (vmbr0) to carry all VLANs
auto vmbr0
iface vmbr0 inet static
    address 10.1.10.252/24
    gateway 10.1.10.1
    bridge-ports enp3s0
    bridge-stp off
    bridge-fd 0
    bridge-vlan-aware yes
    bridge-vids 2-4094

# VLAN 21 Interface
auto vlan21
iface vlan21 inet manual
    vlan-raw-device enp3s0

# VLAN 44 Interface
auto vlan44
iface vlan44 inet manual
    vlan-raw-device enp3s0

# VLAN 66 Interface
auto vlan66
iface vlan66 inet manual
    vlan-raw-device enp3s0

# VLAN 88 Interface
auto vlan88
iface vlan88 inet manual
    vlan-raw-device enp3s0

# VLAN 1337 Interface
auto vlan1337
iface vlan1337 inet manual
    vlan-raw-device enp3s0

# VLAN 71 Interface
auto vlan71
iface vlan71 inet manual
    vlan-raw-device enp3s0

# VLAN 72 Interface
auto vlan72
iface vlan72 inet manual
    vlan-raw-device enp3s0

# Create individual bridges for each VLAN
auto vmbr21
iface vmbr21 inet manual
    bridge_ports vlan21
    bridge_stp off
    bridge_fd 0

auto vmbr44
iface vmbr44 inet manual
    bridge_ports vlan44
    bridge_stp off
    bridge_fd 0

auto vmbr66
iface vmbr66 inet manual
    bridge_ports vlan66
    bridge_stp off
    bridge_fd 0

auto vmbr88
iface vmbr88 inet manual
    bridge_ports vlan88
    bridge_stp off
    bridge_fd 0

auto vmbr1337
iface vmbr1337 inet manual
    bridge_ports vlan1337
    bridge_stp off
    bridge_fd 0

auto vmbr71
iface vmbr71 inet manual
    bridge_ports vlan71
    bridge_stp off
    bridge_fd 0

auto vmbr72
iface vmbr72 inet manual
    bridge_ports vlan72
    bridge_stp off
    bridge_fd 0

# any/everything else:
source /etc/network/interfaces.d/*
